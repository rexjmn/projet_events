Enter your prompt here

# Project Files

- vendor\autoload.php
- utils\session.php
- utils\helpers.php
- views\signup.php
- views\login.php
- views\lieux.php
- views\home.php
- views\evenements.php
- views\contact.php
- views\about.php
- views\404.php
- test_password.php
- views\layouts\header.php
- views\layouts\footer.php
- vendor\composer\LICENSE
- vendor\composer\ClassLoader.php
- vendor\composer\autoload_static.php
- vendor\composer\autoload_real.php
- vendor\composer\autoload_psr4.php
- vendor\composer\autoload_namespaces.php
- vendor\composer\autoload_classmap.php
- src\controllers\EvenementsController.php
- src\controllers\LieuxController.php
- src\controllers\HomeController.php
- src\controllers\AuthController.php
- src\models\User.php
- src\models\Lieu.php
- src\models\Evenement.php
- public\js\scripts.js
- public\css\styles.css
- index.php
- composer.json
- .htaccess
- config\routes.php
- config\database.php

## vendor\autoload.php
```
<?php

// autoload.php @generated by Composer

if (PHP_VERSION_ID < 50600) {
    if (!headers_sent()) {
        header('HTTP/1.1 500 Internal Server Error');
    }
    $err = 'Composer 2.3.0 dropped support for autoloading on PHP <5.6 and you are running '.PHP_VERSION.', please upgrade PHP or use Composer 2.2 LTS via "composer self-update --2.2". Aborting.'.PHP_EOL;
    if (!ini_get('display_errors')) {
        if (PHP_SAPI === 'cli' || PHP_SAPI === 'phpdbg') {
            fwrite(STDERR, $err);
        } elseif (!headers_sent()) {
            echo $err;
        }
    }
    trigger_error(
        $err,
        E_USER_ERROR
    );
}

require_once __DIR__ . '/composer/autoload_real.php';

return ComposerAutoloaderInit1717e95e67f0d3ffd4d1654439ac3b93::getLoader();

```

## utils\session.php
```
<?php

if (session_status() === PHP_SESSION_NONE) {
    session_start();
}

function displaySessionMessages() {
    if (isset($_SESSION["success_message"])) {
        echo '<div class="alert alert-success fixed top-5 right-5 z-50 bg-green-500 text-white px-6 py-3 rounded">' . 
             htmlspecialchars($_SESSION["success_message"]) . 
             '</div>';
        unset($_SESSION["success_message"]);
    }
    if (isset($_SESSION["error_message"])) {
        echo '<div class="alert alert-danger fixed top-5 right-5 z-50 bg-red-500 text-white px-6 py-3 rounded">' . 
             htmlspecialchars($_SESSION["error_message"]) . 
             '</div>';
        unset($_SESSION["error_message"]);
    }
}
```

## utils\helpers.php
```
<?php

function clean_input($data) {
    $data = trim($data);
    $data = htmlspecialchars($data);
    return $data;
}
```

## views\signup.php
```
<section class="flex justify-center items-center min-h-screen">
    <form action="?page=signup" method="post" class="flex flex-col gap-4 w-full max-w-md p-8 bg-black/50 backdrop-blur-md rounded-lg border border-gray-800">
        <div class="text-center mb-6">
            <h1 class="text-5xl text-white font-bold pb-6 border-b border-gray-700" data-aos="fade-up">S'inscrire</h1>
        </div>
        <?php if (isset($_SESSION['error_message'])): ?>
            <div class="bg-red-500/20 text-red-200 p-3 rounded" data-aos="fade-up">
                <?= htmlspecialchars($_SESSION['error_message']); unset($_SESSION['error_message']); ?>
            </div>
        <?php endif; ?>
        <?php if (isset($_SESSION['success_message'])): ?>
            <div class="bg-green-500/20 text-green-200 p-3 rounded" data-aos="fade-up">
                <?= htmlspecialchars($_SESSION['success_message']); unset($_SESSION['success_message']); ?>
            </div>
        <?php endif; ?>
        <div class="space-y-4">
            <input 
                placeholder="Nom" 
                type="text" 
                name="name" 
                class="w-full px-4 py-3 rounded bg-white/90 text-black placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-yellow-500 transition-all" 
                required 
                data-aos="fade-up" 
                data-aos-delay="200"
            >
            <input 
                placeholder="Email" 
                type="email" 
                name="email" 
                class="w-full px-4 py-3 rounded bg-white/90 text-black placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-yellow-500 transition-all" 
                required 
                data-aos="fade-up" 
                data-aos-delay="300"
            >
            <input 
                placeholder="Mot de passe" 
                type="password" 
                name="password" 
                class="w-full px-4 py-3 rounded bg-white/90 text-black placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-yellow-500 transition-all" 
                required 
                minlength="8" 
                data-aos="fade-up" 
                data-aos-delay="400"
            >
        </div>
        <button 
            class="mt-6 bg-yellow-500 text-black py-3 px-6 rounded font-semibold hover:bg-yellow-400 transition-colors" 
            type="submit" 
            data-aos="fade-up" 
            data-aos-delay="500"
        >
            S'inscrire
        </button>
        <p class="text-center text-gray-400 mt-4" data-aos="fade-up" data-aos-delay="600">
            Déjà inscrit ? <a href="?page=login" class="text-yellow-500 hover:text-yellow-400">Connectez-vous</a>
        </p>
    </form>
</section>
```

## views\login.php
```
<section class="flex justify-center items-center min-h-screen">
    <form action="?page=login" method="post" class="flex flex-col gap-5 w-full max-w-md p-8 bg-black/50 backdrop-blur-md rounded-lg border border-gray-800">
        <div class="text-center mb-6">
            <h1 class="text-5xl text-white font-bold pb-6 border-b border-gray-700" data-aos="fade-up">Se connecter</h1>
        </div>
        <?php if (isset($_SESSION['error_message'])): ?>
            <div class="bg-red-500/20 text-red-200 p-3 rounded" data-aos="fade-up">
                <?= htmlspecialchars($_SESSION['error_message']); unset($_SESSION['error_message']); ?>
            </div>
        <?php endif; ?>
        <?php if (isset($_SESSION['success_message'])): ?>
            <div class="bg-green-500/20 text-green-200 p-3 rounded" data-aos="fade-up">
                <?= htmlspecialchars($_SESSION['success_message']); unset($_SESSION['success_message']); ?>
            </div>
        <?php endif; ?>
        <input 
            placeholder="Email" 
            type="email" 
            name="email" 
            required 
            class="w-full px-4 py-3 rounded bg-white/90 text-black placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-yellow-500 transition-all" 
            data-aos="fade-up" 
            data-aos-delay="200"
        >
        <input 
            placeholder="Mot de passe" 
            type="password" 
            name="password" 
            required 
            class="w-full px-4 py-3 rounded bg-white/90 text-black placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-yellow-500 transition-all" 
            data-aos="fade-up" 
            data-aos-delay="300"
        >
        <button 
            class="mt-4 bg-yellow-500 text-black py-3 rounded-xl font-semibold hover:bg-yellow-400 transition-colors" 
            type="submit" 
            data-aos="fade-up" 
            data-aos-delay="400"
        >
            Se connecter
        </button>
        <p class="text-center text-gray-400 mt-4" data-aos="fade-up" data-aos-delay="500">
            Pas encore de compte ? <a href="?page=signup" class="text-yellow-500 hover:text-yellow-400">Inscrivez-vous</a>
        </p>
    </form>
</section>
```

## views\lieux.php
```

```

## views\home.php
```
<section class="flex justify-center items-center min-h-screen">
    <div class="text-center">
        <h1 class="text-6xl text-white font-bold bg-black/10 backdrop-blur-md p-6 rounded-lg" data-aos="fade-up">
            Bienvenue, Voyageurs
        </h1>
        <p class="text-xl text-gray-300 mt-4 max-w-2xl mx-auto" data-aos="fade-up" data-aos-delay="200">
            Découvrez des événements incroyables et explorez des lieux uniques. Votre aventure commence ici !
        </p>
        <?php if (isset($_SESSION['username'])): ?>
            <p class="text-lg text-yellow-500 mt-6" data-aos="fade-up" data-aos-delay="400">
                Bonjour, <?= htmlspecialchars($_SESSION['username']) ?> ! Prêt à explorer ?
            </p>
        <?php endif; ?>
    </div>
</section>
```

## views\evenements.php
```

```

## views\contact.php
```

```

## views\about.php
```

```

## views\404.php
```

```

## test_password.php
```
<?php
$storedHash = '$2y$10$CNqLREa3RS6kRq1qmdNduOAFQV3xSb2lOSDsIvJ4kfhjE6yEl15l6';
$password = '1234';
if (password_verify($password, $storedHash)) {
    echo "Password correcto!";
} else {
    echo "Password incorrecto.";
}
```

## views\layouts\header.php
```
<?php
// views/layouts/header.php
require_once __DIR__ . '/../../utils/session.php';

// Definir la página actual
$currentPage = isset($_GET["page"]) ? $_GET["page"] : 'home';
?>
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projet PHP - Événements</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://unpkg.com/aos@next/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            AOS.init();
        });
    </script>
</head>
<body class="relative min-h-screen">
    <!-- Mostrar mensajes de sesión -->
    <?php displaySessionMessages(); ?>

    <!-- Video de fondo -->
    <video 
    data-aos="fade" 
    src="<?php echo '/project_events/public/assets/flames1.mp4'; ?>" 
    autoplay 
    loop 
    muted 
    class="absolute top-0 left-0 w-full h-full object-cover"
></video>

    <header data-aos="fade-down">
        <?php if (isset($_SESSION["role"]) && $_SESSION["role"] === "admin"): ?>
            <!-- Navegación para Admin -->
            <nav class="admin flex justify-between bg-black/50 backdrop-blur-md py-5 fixed top-0 left-0 right-0 z-20">
                <div class="flex gap-5 items-center px-10 text-white">
                    <span class="text-white">
                        Bonjour, <?php echo htmlspecialchars($_SESSION["username"] ?? ''); ?>
                    </span>
                    <span class="text-white">Rôle : ADMIN</span>
                    <a href="?page=logout" class="text-white hover:text-yellow-500 transition-colors">LOGOUT</a>
                </div>
            </nav>
            
            <!-- Sidebar para Admin -->
            <div class="h-screen w-[400px] bg-gray-900 fixed left-0 top-[70px] z-10 shadow-lg overflow-y-auto">
                <h2 class="text-2xl text-white text-center py-6 border-b border-gray-700">Tableau de Bord Admin</h2>
                <ul class="text-white space-y-4 py-6 px-4">
                    <li><a href="?page=evenements" class="block text-lg hover:bg-gray-700 rounded-lg p-3 transition duration-200">Événements</a></li>
                    <li><a href="?page=lieux" class="block text-lg hover:bg-gray-700 rounded-lg p-3 transition duration-200">Lieux</a></li>
                </ul>
            </div>
        <?php else: ?>
            <!-- Navegación para Usuarios -->
            <nav class="user flex justify-between bg-black/50 backdrop-blur-md py-5 fixed top-0 left-0 right-0 z-10">
                <ul class="flex text-xl gap-10 justify-end text-white items-center px-10">
                    <li><a class="<?php echo $currentPage === 'home' ? 'text-yellow-500' : 'hover:text-yellow-500 transition-colors'; ?>" href="?page=home">HOME</a></li>
                    <li><a class="<?php echo $currentPage === 'about' ? 'text-yellow-500' : 'hover:text-yellow-500 transition-colors'; ?>" href="?page=about">ABOUT</a></li>
                    <li><a class="<?php echo $currentPage === 'contact' ? 'text-yellow-500' : 'hover:text-yellow-500 transition-colors'; ?>" href="?page=contact">CONTACT</a></li>
                </ul>
                <div class="flex gap-5 items-center px-10 text-white">
                    <?php if (isset($_SESSION["username"])): ?>
                        <span class="text-white">Bonjour, <?php echo htmlspecialchars($_SESSION["username"]); ?></span>
                        <a href="?page=logout" class="text-white hover:text-yellow-500 transition-colors">LOGOUT</a>
                    <?php else: ?>
                        <a href="?page=login" class="text-white hover:text-yellow-500 transition-colors">LOGIN</a>
                        <a href="?page=signup" class="text-white hover:text-yellow-500 transition-colors">SIGNUP</a>
                    <?php endif; ?>
                </div>
            </nav>
        <?php endif; ?>
    </header>
```

## views\layouts\footer.php
```
<footer class="text-center text-white bg-black py-5 fixed bottom-0 left-0 right-0 z-10">
        <p>Copyright © 2025 - Projet Events</p>
    </footer>
</body>
</html>
```

## vendor\composer\LICENSE
```

Copyright (c) Nils Adermann, Jordi Boggiano

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is furnished
to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.


```

## vendor\composer\ClassLoader.php
```
<?php

/*
 * This file is part of Composer.
 *
 * (c) Nils Adermann <naderman@naderman.de>
 *     Jordi Boggiano <j.boggiano@seld.be>
 *
 * For the full copyright and license information, please view the LICENSE
 * file that was distributed with this source code.
 */

namespace Composer\Autoload;

/**
 * ClassLoader implements a PSR-0, PSR-4 and classmap class loader.
 *
 *     $loader = new \Composer\Autoload\ClassLoader();
 *
 *     // register classes with namespaces
 *     $loader->add('Symfony\Component', __DIR__.'/component');
 *     $loader->add('Symfony',           __DIR__.'/framework');
 *
 *     // activate the autoloader
 *     $loader->register();
 *
 *     // to enable searching the include path (eg. for PEAR packages)
 *     $loader->setUseIncludePath(true);
 *
 * In this example, if you try to use a class in the Symfony\Component
 * namespace or one of its children (Symfony\Component\Console for instance),
 * the autoloader will first look for the class under the component/
 * directory, and it will then fallback to the framework/ directory if not
 * found before giving up.
 *
 * This class is loosely based on the Symfony UniversalClassLoader.
 *
 * @author Fabien Potencier <fabien@symfony.com>
 * @author Jordi Boggiano <j.boggiano@seld.be>
 * @see    https://www.php-fig.org/psr/psr-0/
 * @see    https://www.php-fig.org/psr/psr-4/
 */
class ClassLoader
{
    /** @var \Closure(string):void */
    private static $includeFile;

    /** @var string|null */
    private $vendorDir;

    // PSR-4
    /**
     * @var array<string, array<string, int>>
     */
    private $prefixLengthsPsr4 = array();
    /**
     * @var array<string, list<string>>
     */
    private $prefixDirsPsr4 = array();
    /**
     * @var list<string>
     */
    private $fallbackDirsPsr4 = array();

    // PSR-0
    /**
     * List of PSR-0 prefixes
     *
     * Structured as array('F (first letter)' => array('Foo\Bar (full prefix)' => array('path', 'path2')))
     *
     * @var array<string, array<string, list<string>>>
     */
    private $prefixesPsr0 = array();
    /**
     * @var list<string>
     */
    private $fallbackDirsPsr0 = array();

    /** @var bool */
    private $useIncludePath = false;

    /**
     * @var array<string, string>
     */
    private $classMap = array();

    /** @var bool */
    private $classMapAuthoritative = false;

    /**
     * @var array<string, bool>
     */
    private $missingClasses = array();

    /** @var string|null */
    private $apcuPrefix;

    /**
     * @var array<string, self>
     */
    private static $registeredLoaders = array();

    /**
     * @param string|null $vendorDir
     */
    public function __construct($vendorDir = null)
    {
        $this->vendorDir = $vendorDir;
        self::initializeIncludeClosure();
    }

    /**
     * @return array<string, list<string>>
     */
    public function getPrefixes()
    {
        if (!empty($this->prefixesPsr0)) {
            return call_user_func_array('array_merge', array_values($this->prefixesPsr0));
        }

        return array();
    }

    /**
     * @return array<string, list<string>>
     */
    public function getPrefixesPsr4()
    {
        return $this->prefixDirsPsr4;
    }

    /**
     * @return list<string>
     */
    public function getFallbackDirs()
    {
        return $this->fallbackDirsPsr0;
    }

    /**
     * @return list<string>
     */
    public function getFallbackDirsPsr4()
    {
        return $this->fallbackDirsPsr4;
    }

    /**
     * @return array<string, string> Array of classname => path
     */
    public function getClassMap()
    {
        return $this->classMap;
    }

    /**
     * @param array<string, string> $classMap Class to filename map
     *
     * @return void
     */
    public function addClassMap(array $classMap)
    {
        if ($this->classMap) {
            $this->classMap = array_merge($this->classMap, $classMap);
        } else {
            $this->classMap = $classMap;
        }
    }

    /**
     * Registers a set of PSR-0 directories for a given prefix, either
     * appending or prepending to the ones previously set for this prefix.
     *
     * @param string              $prefix  The prefix
     * @param list<string>|string $paths   The PSR-0 root directories
     * @param bool                $prepend Whether to prepend the directories
     *
     * @return void
     */
    public function add($prefix, $paths, $prepend = false)
    {
        $paths = (array) $paths;
        if (!$prefix) {
            if ($prepend) {
                $this->fallbackDirsPsr0 = array_merge(
                    $paths,
                    $this->fallbackDirsPsr0
                );
            } else {
                $this->fallbackDirsPsr0 = array_merge(
                    $this->fallbackDirsPsr0,
                    $paths
                );
            }

            return;
        }

        $first = $prefix[0];
        if (!isset($this->prefixesPsr0[$first][$prefix])) {
            $this->prefixesPsr0[$first][$prefix] = $paths;

            return;
        }
        if ($prepend) {
            $this->prefixesPsr0[$first][$prefix] = array_merge(
                $paths,
                $this->prefixesPsr0[$first][$prefix]
            );
        } else {
            $this->prefixesPsr0[$first][$prefix] = array_merge(
                $this->prefixesPsr0[$first][$prefix],
                $paths
            );
        }
    }

    /**
     * Registers a set of PSR-4 directories for a given namespace, either
     * appending or prepending to the ones previously set for this namespace.
     *
     * @param string              $prefix  The prefix/namespace, with trailing '\\'
     * @param list<string>|string $paths   The PSR-4 base directories
     * @param bool                $prepend Whether to prepend the directories
     *
     * @throws \InvalidArgumentException
     *
     * @return void
     */
    public function addPsr4($prefix, $paths, $prepend = false)
    {
        $paths = (array) $paths;
        if (!$prefix) {
            // Register directories for the root namespace.
            if ($prepend) {
                $this->fallbackDirsPsr4 = array_merge(
                    $paths,
                    $this->fallbackDirsPsr4
                );
            } else {
                $this->fallbackDirsPsr4 = array_merge(
                    $this->fallbackDirsPsr4,
                    $paths
                );
            }
        } elseif (!isset($this->prefixDirsPsr4[$prefix])) {
            // Register directories for a new namespace.
            $length = strlen($prefix);
            if ('\\' !== $prefix[$length - 1]) {
                throw new \InvalidArgumentException("A non-empty PSR-4 prefix must end with a namespace separator.");
            }
            $this->prefixLengthsPsr4[$prefix[0]][$prefix] = $length;
            $this->prefixDirsPsr4[$prefix] = $paths;
        } elseif ($prepend) {
            // Prepend directories for an already registered namespace.
            $this->prefixDirsPsr4[$prefix] = array_merge(
                $paths,
                $this->prefixDirsPsr4[$prefix]
            );
        } else {
            // Append directories for an already registered namespace.
            $this->prefixDirsPsr4[$prefix] = array_merge(
                $this->prefixDirsPsr4[$prefix],
                $paths
            );
        }
    }

    /**
     * Registers a set of PSR-0 directories for a given prefix,
     * replacing any others previously set for this prefix.
     *
     * @param string              $prefix The prefix
     * @param list<string>|string $paths  The PSR-0 base directories
     *
     * @return void
     */
    public function set($prefix, $paths)
    {
        if (!$prefix) {
            $this->fallbackDirsPsr0 = (array) $paths;
        } else {
            $this->prefixesPsr0[$prefix[0]][$prefix] = (array) $paths;
        }
    }

    /**
     * Registers a set of PSR-4 directories for a given namespace,
     * replacing any others previously set for this namespace.
     *
     * @param string              $prefix The prefix/namespace, with trailing '\\'
     * @param list<string>|string $paths  The PSR-4 base directories
     *
     * @throws \InvalidArgumentException
     *
     * @return void
     */
    public function setPsr4($prefix, $paths)
    {
        if (!$prefix) {
            $this->fallbackDirsPsr4 = (array) $paths;
        } else {
            $length = strlen($prefix);
            if ('\\' !== $prefix[$length - 1]) {
                throw new \InvalidArgumentException("A non-empty PSR-4 prefix must end with a namespace separator.");
            }
            $this->prefixLengthsPsr4[$prefix[0]][$prefix] = $length;
            $this->prefixDirsPsr4[$prefix] = (array) $paths;
        }
    }

    /**
     * Turns on searching the include path for class files.
     *
     * @param bool $useIncludePath
     *
     * @return void
     */
    public function setUseIncludePath($useIncludePath)
    {
        $this->useIncludePath = $useIncludePath;
    }

    /**
     * Can be used to check if the autoloader uses the include path to check
     * for classes.
     *
     * @return bool
     */
    public function getUseIncludePath()
    {
        return $this->useIncludePath;
    }

    /**
     * Turns off searching the prefix and fallback directories for classes
     * that have not been registered with the class map.
     *
     * @param bool $classMapAuthoritative
     *
     * @return void
     */
    public function setClassMapAuthoritative($classMapAuthoritative)
    {
        $this->classMapAuthoritative = $classMapAuthoritative;
    }

    /**
     * Should class lookup fail if not found in the current class map?
     *
     * @return bool
     */
    public function isClassMapAuthoritative()
    {
        return $this->classMapAuthoritative;
    }

    /**
     * APCu prefix to use to cache found/not-found classes, if the extension is enabled.
     *
     * @param string|null $apcuPrefix
     *
     * @return void
     */
    public function setApcuPrefix($apcuPrefix)
    {
        $this->apcuPrefix = function_exists('apcu_fetch') && filter_var(ini_get('apc.enabled'), FILTER_VALIDATE_BOOLEAN) ? $apcuPrefix : null;
    }

    /**
     * The APCu prefix in use, or null if APCu caching is not enabled.
     *
     * @return string|null
     */
    public function getApcuPrefix()
    {
        return $this->apcuPrefix;
    }

    /**
     * Registers this instance as an autoloader.
     *
     * @param bool $prepend Whether to prepend the autoloader or not
     *
     * @return void
     */
    public function register($prepend = false)
    {
        spl_autoload_register(array($this, 'loadClass'), true, $prepend);

        if (null === $this->vendorDir) {
            return;
        }

        if ($prepend) {
            self::$registeredLoaders = array($this->vendorDir => $this) + self::$registeredLoaders;
        } else {
            unset(self::$registeredLoaders[$this->vendorDir]);
            self::$registeredLoaders[$this->vendorDir] = $this;
        }
    }

    /**
     * Unregisters this instance as an autoloader.
     *
     * @return void
     */
    public function unregister()
    {
        spl_autoload_unregister(array($this, 'loadClass'));

        if (null !== $this->vendorDir) {
            unset(self::$registeredLoaders[$this->vendorDir]);
        }
    }

    /**
     * Loads the given class or interface.
     *
     * @param  string    $class The name of the class
     * @return true|null True if loaded, null otherwise
     */
    public function loadClass($class)
    {
        if ($file = $this->findFile($class)) {
            $includeFile = self::$includeFile;
            $includeFile($file);

            return true;
        }

        return null;
    }

    /**
     * Finds the path to the file where the class is defined.
     *
     * @param string $class The name of the class
     *
     * @return string|false The path if found, false otherwise
     */
    public function findFile($class)
    {
        // class map lookup
        if (isset($this->classMap[$class])) {
            return $this->classMap[$class];
        }
        if ($this->classMapAuthoritative || isset($this->missingClasses[$class])) {
            return false;
        }
        if (null !== $this->apcuPrefix) {
            $file = apcu_fetch($this->apcuPrefix.$class, $hit);
            if ($hit) {
                return $file;
            }
        }

        $file = $this->findFileWithExtension($class, '.php');

        // Search for Hack files if we are running on HHVM
        if (false === $file && defined('HHVM_VERSION')) {
            $file = $this->findFileWithExtension($class, '.hh');
        }

        if (null !== $this->apcuPrefix) {
            apcu_add($this->apcuPrefix.$class, $file);
        }

        if (false === $file) {
            // Remember that this class does not exist.
            $this->missingClasses[$class] = true;
        }

        return $file;
    }

    /**
     * Returns the currently registered loaders keyed by their corresponding vendor directories.
     *
     * @return array<string, self>
     */
    public static function getRegisteredLoaders()
    {
        return self::$registeredLoaders;
    }

    /**
     * @param  string       $class
     * @param  string       $ext
     * @return string|false
     */
    private function findFileWithExtension($class, $ext)
    {
        // PSR-4 lookup
        $logicalPathPsr4 = strtr($class, '\\', DIRECTORY_SEPARATOR) . $ext;

        $first = $class[0];
        if (isset($this->prefixLengthsPsr4[$first])) {
            $subPath = $class;
            while (false !== $lastPos = strrpos($subPath, '\\')) {
                $subPath = substr($subPath, 0, $lastPos);
                $search = $subPath . '\\';
                if (isset($this->prefixDirsPsr4[$search])) {
                    $pathEnd = DIRECTORY_SEPARATOR . substr($logicalPathPsr4, $lastPos + 1);
                    foreach ($this->prefixDirsPsr4[$search] as $dir) {
                        if (file_exists($file = $dir . $pathEnd)) {
                            return $file;
                        }
                    }
                }
            }
        }

        // PSR-4 fallback dirs
        foreach ($this->fallbackDirsPsr4 as $dir) {
            if (file_exists($file = $dir . DIRECTORY_SEPARATOR . $logicalPathPsr4)) {
                return $file;
            }
        }

        // PSR-0 lookup
        if (false !== $pos = strrpos($class, '\\')) {
            // namespaced class name
            $logicalPathPsr0 = substr($logicalPathPsr4, 0, $pos + 1)
                . strtr(substr($logicalPathPsr4, $pos + 1), '_', DIRECTORY_SEPARATOR);
        } else {
            // PEAR-like class name
            $logicalPathPsr0 = strtr($class, '_', DIRECTORY_SEPARATOR) . $ext;
        }

        if (isset($this->prefixesPsr0[$first])) {
            foreach ($this->prefixesPsr0[$first] as $prefix => $dirs) {
                if (0 === strpos($class, $prefix)) {
                    foreach ($dirs as $dir) {
                        if (file_exists($file = $dir . DIRECTORY_SEPARATOR . $logicalPathPsr0)) {
                            return $file;
                        }
                    }
                }
            }
        }

        // PSR-0 fallback dirs
        foreach ($this->fallbackDirsPsr0 as $dir) {
            if (file_exists($file = $dir . DIRECTORY_SEPARATOR . $logicalPathPsr0)) {
                return $file;
            }
        }

        // PSR-0 include paths.
        if ($this->useIncludePath && $file = stream_resolve_include_path($logicalPathPsr0)) {
            return $file;
        }

        return false;
    }

    /**
     * @return void
     */
    private static function initializeIncludeClosure()
    {
        if (self::$includeFile !== null) {
            return;
        }

        /**
         * Scope isolated include.
         *
         * Prevents access to $this/self from included files.
         *
         * @param  string $file
         * @return void
         */
        self::$includeFile = \Closure::bind(static function($file) {
            include $file;
        }, null, null);
    }
}

```

## vendor\composer\autoload_static.php
```
<?php

// autoload_static.php @generated by Composer

namespace Composer\Autoload;

class ComposerStaticInit1717e95e67f0d3ffd4d1654439ac3b93
{
    public static $prefixLengthsPsr4 = array (
        'A' => 
        array (
            'App\\' => 4,
        ),
    );

    public static $prefixDirsPsr4 = array (
        'App\\' => 
        array (
            0 => __DIR__ . '/../..' . '/src',
        ),
    );

    public static $classMap = array (
        'Composer\\InstalledVersions' => __DIR__ . '/..' . '/composer/InstalledVersions.php',
    );

    public static function getInitializer(ClassLoader $loader)
    {
        return \Closure::bind(function () use ($loader) {
            $loader->prefixLengthsPsr4 = ComposerStaticInit1717e95e67f0d3ffd4d1654439ac3b93::$prefixLengthsPsr4;
            $loader->prefixDirsPsr4 = ComposerStaticInit1717e95e67f0d3ffd4d1654439ac3b93::$prefixDirsPsr4;
            $loader->classMap = ComposerStaticInit1717e95e67f0d3ffd4d1654439ac3b93::$classMap;

        }, null, ClassLoader::class);
    }
}

```

## vendor\composer\autoload_real.php
```
<?php

// autoload_real.php @generated by Composer

class ComposerAutoloaderInit1717e95e67f0d3ffd4d1654439ac3b93
{
    private static $loader;

    public static function loadClassLoader($class)
    {
        if ('Composer\Autoload\ClassLoader' === $class) {
            require __DIR__ . '/ClassLoader.php';
        }
    }

    /**
     * @return \Composer\Autoload\ClassLoader
     */
    public static function getLoader()
    {
        if (null !== self::$loader) {
            return self::$loader;
        }

        spl_autoload_register(array('ComposerAutoloaderInit1717e95e67f0d3ffd4d1654439ac3b93', 'loadClassLoader'), true, true);
        self::$loader = $loader = new \Composer\Autoload\ClassLoader(\dirname(__DIR__));
        spl_autoload_unregister(array('ComposerAutoloaderInit1717e95e67f0d3ffd4d1654439ac3b93', 'loadClassLoader'));

        require __DIR__ . '/autoload_static.php';
        call_user_func(\Composer\Autoload\ComposerStaticInit1717e95e67f0d3ffd4d1654439ac3b93::getInitializer($loader));

        $loader->register(true);

        return $loader;
    }
}

```

## vendor\composer\autoload_psr4.php
```
<?php

// autoload_psr4.php @generated by Composer

$vendorDir = dirname(__DIR__);
$baseDir = dirname($vendorDir);

return array(
    'App\\' => array($baseDir . '/src'),
);

```

## vendor\composer\autoload_namespaces.php
```
<?php

// autoload_namespaces.php @generated by Composer

$vendorDir = dirname(__DIR__);
$baseDir = dirname($vendorDir);

return array(
);

```

## vendor\composer\autoload_classmap.php
```
<?php

// autoload_classmap.php @generated by Composer

$vendorDir = dirname(__DIR__);
$baseDir = dirname($vendorDir);

return array(
    'Composer\\InstalledVersions' => $vendorDir . '/composer/InstalledVersions.php',
);

```

## src\controllers\EvenementsController.php
```
<?php
// src/controllers/EvenementsController.php
namespace App\Controllers;

class EvenementsController {
    private $pdo;

    public function __construct($pdo) {
        $this->pdo = $pdo;
    }

    public function index() {
        require_once __DIR__ . '/../../views/evenements.php';
    }
}
```

## src\controllers\LieuxController.php
```
<?php

namespace App\Controllers;

class LieuxController {
    private $pdo;

    public function __construct($pdo) {
        $this->pdo = $pdo;
    }

    public function index() {
        require_once __DIR__ . '/../../views/lieux.php';
    }
}
```

## src\controllers\HomeController.php
```
<?php
namespace App\Controllers;

class HomeController {
    private $pdo;

    public function __construct($pdo) {
        $this->pdo = $pdo;
    }

    public function index() {
        require_once __DIR__ . '/../../views/home.php';
    }

    public function about() {
        require_once __DIR__ . '/../../views/about.php';
    }

    public function contact() {
        require_once __DIR__ . '/../../views/contact.php';
    }
}
```

## src\controllers\AuthController.php
```
<?php
namespace App\Controllers;

use Exception;
use PDO;

class AuthController {
    private $pdo;

    public function __construct($pdo) {
        $this->pdo = $pdo;
    }

    public function login() {
        // Comenzar el buffer de salida
        ob_start();

        echo "Entrando a login()<br>";
        echo "Método recibido: " . $_SERVER['REQUEST_METHOD'] . "<br>";
        echo "POST recibido: ";
        var_dump($_POST);

        if ($_SERVER['REQUEST_METHOD'] === 'POST') {
            echo "Procesando POST<br>";
            try {
                require_once __DIR__ . '/../../utils/helpers.php';

                $email = clean_input($_POST['email'] ?? '');
                $password = clean_input($_POST['password'] ?? '');

                echo "Email: $email<br>";
                echo "Password: $password<br>";

                if (!$email || !$password) {
                    throw new Exception("Email et mot de passe sont obligatoires");
                }

                // Usar $stmt como en el código antiguo
                $stmt = $this->pdo->prepare("SELECT * FROM utilisateurs WHERE email = :email");
                $stmt->bindParam(':email', $email);
                $stmt->execute();
                $user = $stmt->fetch(PDO::FETCH_ASSOC);

                echo "Usuario encontrado: ";
                var_dump($user);

                if ($user && password_verify($password, $user['mot_de_passe'])) {
                    // Iniciar sesión y establecer variables
                    $_SESSION['user_id'] = $user['id_utilisateur'];
                    $_SESSION['username'] = $user['nom'];
                    $_SESSION['role'] = $user['role'];

                    echo "Sesión establecida: ";
                    var_dump($_SESSION);

                    $_SESSION['success_message'] = "Connexion réussie ! Bienvenue, " . htmlspecialchars($user['nom']);
                    
                    // Limpiar el buffer y redirigir
                    ob_clean();
                    header('Location: ?page=home');
                    exit;
                } else {
                    throw new Exception("Email ou mot de passe incorrect");
                }
            } catch (Exception $e) {
                $_SESSION['error_message'] = $e->getMessage();
                echo "Error capturado: " . $e->getMessage() . "<br>";
                
                // Limpiar el buffer y redirigir
                ob_clean();
                header('Location: ?page=login');
                exit;
            }
        } else {
            echo "No es POST<br>";
        }
        
        require_once __DIR__ . '/../../views/login.php';
        ob_end_flush(); // Liberar el buffer si no se redirige
    }

    public function signup() {
        if ($_SERVER['REQUEST_METHOD'] === 'POST') {
            try {
                require_once __DIR__ . '/../../utils/helpers.php';

                $name = clean_input($_POST['name'] ?? '');
                $email = clean_input($_POST['email'] ?? '');
                $password = $_POST['password'] ?? '';

                if (!$name || !$email || !$password) {
                    throw new Exception("Tous les champs sont obligatoires");
                }
                if (strlen($password) < 8) {
                    throw new Exception("Le mot de passe doit avoir au moins 8 caractères");
                }

                $stmt = $this->pdo->prepare("SELECT * FROM utilisateurs WHERE email = :email");
                $stmt->bindParam(':email', $email);
                $stmt->execute();
                if ($stmt->fetch()) {
                    throw new Exception("Cet email est déjà utilisé");
                }

                $hashedPassword = password_hash($password, PASSWORD_DEFAULT);
                $role = 'user';
                $stmt = $this->pdo->prepare("INSERT INTO utilisateurs (nom, email, mot_de_passe, role) VALUES (:nom, :email, :mot_de_passe, :role)");
                $stmt->execute([
                    'nom' => $name,
                    'email' => $email,
                    'mot_de_passe' => $hashedPassword,
                    'role' => $role
                ]);

                $_SESSION['success_message'] = "Inscription réussie ! Vous pouvez maintenant vous connecter.";
                header('Location: ?page=login');
                exit;
            } catch (Exception $e) {
                $_SESSION['error_message'] = $e->getMessage();
            }
        }
        require_once __DIR__ . '/../../views/signup.php';
    }

    public function logout() {
        session_destroy();
        header('Location: ?page=login');
        exit;
    }
}
```

## src\models\User.php
```
<?php
namespace App\Models;

class User {
    private $pdo;

    public function __construct($pdo) {
        $this->pdo = $pdo;
    }

    public function findByEmail($email) {
        $stmt = $this->pdo->prepare("SELECT * FROM utilisateurs WHERE email = :email");
        $stmt->execute(['email' => $email]);
        return $stmt->fetch();
    }

    public function create($name, $email, $password, $role) {
        $stmt = $this->pdo->prepare("INSERT INTO utilisateurs (nom, email, mot_de_passe, role) VALUES (:nom, :email, :mot_de_passe, :role)");
        return $stmt->execute([
            'nom' => $name,
            'email' => $email,
            'mot_de_passe' => $password,
            'role' => $role
        ]);
    }
}
```

## src\models\Lieu.php
```
<?php
// src/models/Lieu.php
namespace App\Models;

class Lieu {
    private $pdo;

    public function __construct($pdo) {
        $this->pdo = $pdo;
    }

    // Métodos a implementar más tarde
}
```

## src\models\Evenement.php
```
<?php
// src/models/Evenement.php
namespace App\Models;

class Evenement {
    private $pdo;

    public function __construct($pdo) {
        $this->pdo = $pdo;
    }

    // Métodos a implementar más tarde
}
```

## public\js\scripts.js
```

```

## public\css\styles.css
```

```

## index.php
```
<?php
ini_set('display_errors', 1);
ini_set('display_startup_errors', 1);
error_reporting(E_ALL);
require_once __DIR__ . '/vendor/autoload.php';
require_once __DIR__ . '/utils/session.php';
require_once __DIR__ . '/config/database.php';
require_once __DIR__ . '/config/routes.php';


try {
    $pdo = getDatabaseConnection(); 
} catch (PDOException $e) {
    die($e->getMessage());
}

$page = $_GET['page'] ?? 'home';

$routes = require_once __DIR__ . '/config/routes.php';

if ( isset($routes[$page]) ) {
    $controllerName = $routes[$page]['controller'];
    $method = $routes[$page]['method'];
    if(class_exists($controllerName)) {
        $controller = new $controllerName($pdo);
        if (method_exists($controller, $method)) {
            $controller->$method();
        } else {
            require_once __DIR__ . '/views/404.php';
        }
    } else {
        require_once __DIR__ . '/views/404.php';
    }
} else {
    require_once __DIR__ . '/views/404.php';
}

$viewPath = __DIR__ . '/views/' . $page . '.php';

if (file_exists($viewPath)) {
    require_once __DIR__ . '/views/layouts/header.php';
    require_once $viewPath;
    require_once __DIR__ . '/views/layouts/footer.php';
} else {
    require_once __DIR__ . '/views/404.php';
}
```

## composer.json
```
{
    "name": "rexma/project_events",
    "description": "un proyect php pour la gestion de lieux et evnements",
    "license": "MIT",
    "autoload": {
        "psr-4": {
            "App\\": "src/"
        }
    },
    "authors": [
        {
            "name": "rexjmn",
            "email": "rexmayorga97@gmail.com"
        }
    ],
    "require": {}
   
}

```

## .htaccess
```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php [QSA,L]
```

## config\routes.php
```
<?php

$routes = [
    'home' => [
        'controller' => 'App\Controllers\HomeController',
        'method' => 'index'
    ],
    'login' => [
        'controller' => 'App\Controllers\AuthController',
        'method' => 'login'
    ],
    'signup' => [
        'controller' => 'App\Controllers\AuthController',
        'method' => 'signup'
    ],
    'logout' => [
        'controller' => 'App\Controllers\AuthController',
        'method' => 'logout'
    ],
    'about' => [
        'controller' => 'App\Controllers\HomeController',
        'method' => 'about'
    ],
    'contact' => [
        'controller' => 'App\Controllers\HomeController',
        'method' => 'contact'
    ],
    'lieux' => [
        'controller' => 'App\Controllers\LieuxController',
        'method' => 'index'
    ],
    'evenements' => [
        'controller' => 'App\Controllers\EvenementsController',
        'method' => 'index'
    ]
];

return $routes;
```

## config\database.php
```
<?php
function getDatabaseConnection() {
    $dsn = "mysql:host=localhost;dbname=projet-php;charset=utf8;port=3306";
    $user = "root";
    $pass = "";

    try {
        $pdo = new PDO($dsn, $user, $pass, [
            PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,
            PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC
        ]);
        return $pdo;
    } catch (PDOException $e) {
        throw new PDOException("Erreur de connexion à la base de données : " . $e->getMessage());
    }
}
```

